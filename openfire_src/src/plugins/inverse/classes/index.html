<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>inVerse</title>
    <link rel="shortcut icon" type="image/ico" href="inverse/css/images/favicon.ico"/>
    <link type="text/css" rel="stylesheet" media="screen" href="inverse/css/inverse.min.css" />
    <script src="inverse/dist/converse.min.js"></script>
</head>
<body>
<div class="content">
    <div class="inner-content">
        <h1 class="brand-heading"><i class="icon-conversejs"></i> inVerse</h1>
    </div>
</div>
<script>
    function ready(fn) {
        if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading"){
            fn();
        } else {
            document.addEventListener('DOMContentLoaded', fn);
        }
    }

    function initConverse()
    {
        var request = new XMLHttpRequest();
        request.open( 'GET', 'config.json', true );

        request.onload = function ()
        {
            if ( request.status >= 200 && request.status < 400 )
            {
                var config = JSON.parse( request.responseText );
                converse.initialize( config );
            }
            else
            {
                console.error( "We reached our target server, but it returned an error: " + request.status );
            }
        };

        request.onerror = function ( e )
        {
            console.error( "There was a connection error of some sort:" + e );
        };

        request.send();
    }

    ready( initConverse );
</script>
</body>
</html>
